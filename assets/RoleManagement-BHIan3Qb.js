import{q as W,z as ee,H as te,S as D,I as ae,U as ne,a as w}from"./antd-Bkgtc1Na.js";import{d as se,f as v,r as oe,o as ie,_ as C,$ as o,k as t,a0 as n,Y as i,Z as _,G as r,u as m,F as M,a3 as P,X as O,a6 as p,a4 as le}from"./vendor-DYmnM11n.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";const re={class:"role-management"},ue={class:"page-header"},me={class:"role-list"},pe={class:"role-header"},ce={class:"role-info"},ve={class:"role-stats"},_e={class:"stat-item"},fe={class:"stat-item"},ge={class:"role-permissions"},ye={class:"permission-tags"},ke={class:"permission-config"},he=se({__name:"RoleManagement",setup(we){const d=v([]),f=v(!1),g=v(!1),c=v(null),y=v(null),k=v([]),l=oe({name:"",description:"",status:"active"}),$=[{title:"数据概览",key:"dashboard",children:[{title:"查看数据概览",key:"dashboard:view"},{title:"导出数据",key:"dashboard:export"}]},{title:"资源库管理",key:"resources",children:[{title:"企业库管理",key:"enterprise:manage"},{title:"需求库管理",key:"demand:manage"},{title:"产品库管理",key:"product:manage"},{title:"解决方案管理",key:"solution:manage"},{title:"专家库管理",key:"expert:manage"}]},{title:"战略洞察",key:"insights",children:[{title:"产业链概览",key:"industry:overview"},{title:"产业链图谱",key:"industry:chain"},{title:"企业地图",key:"enterprise:map"}]},{title:"机会引擎",key:"opportunities",children:[{title:"供需地图",key:"supply:demand"},{title:"智能匹配",key:"smart:match"}]},{title:"系统管理",key:"admin",children:[{title:"用户管理",key:"user:manage"},{title:"角色管理",key:"role:manage"},{title:"权限管理",key:"permission:manage"},{title:"系统配置",key:"system:config"}]}],I={"dashboard:view":"数据概览","dashboard:export":"数据导出","enterprise:manage":"企业管理","demand:manage":"需求管理","product:manage":"产品管理","solution:manage":"解决方案","expert:manage":"专家管理","industry:overview":"产业概览","industry:chain":"产业图谱","enterprise:map":"企业地图","supply:demand":"供需地图","smart:match":"智能匹配","user:manage":"用户管理","role:manage":"角色管理","permission:manage":"权限管理","system:config":"系统配置"},B=s=>I[s]||s,L=s=>{c.value=s,Object.assign(l,s),f.value=!0},N=s=>{y.value=s,k.value=[...s.permissions],g.value=!0},V=s=>{const e=d.value.findIndex(h=>h.id===s);e>-1&&(d.value.splice(e,1),w.success("角色删除成功"))},q=()=>{if(c.value){const s=d.value.findIndex(e=>e.id===c.value.id);s>-1&&(d.value[s]={...d.value[s],...l,id:c.value.id}),w.success("角色更新成功")}else{const s={...l,id:Date.now().toString(),permissions:[],userCount:0,createTime:new Date().toLocaleDateString()};d.value.unshift(s),w.success("角色添加成功")}R()},R=()=>{f.value=!1,c.value=null,Object.assign(l,{name:"",description:"",status:"active"})},F=()=>{if(y.value){const s=d.value.findIndex(e=>e.id===y.value.id);s>-1&&(d.value[s].permissions=[...k.value]),w.success("权限配置保存成功")}g.value=!1},K=()=>{d.value=[{id:"1",name:"系统管理员",description:"拥有系统所有权限，可以管理用户、角色和系统配置",permissions:["dashboard:view","dashboard:export","enterprise:manage","demand:manage","product:manage","solution:manage","expert:manage","industry:overview","industry:chain","enterprise:map","supply:demand","smart:match","user:manage","role:manage","permission:manage","system:config"],userCount:2,status:"active",createTime:"2024-01-01"},{id:"2",name:"数据分析师",description:"可以查看和分析所有数据，使用战略洞察和机会引擎功能",permissions:["dashboard:view","dashboard:export","enterprise:manage","demand:manage","product:manage","industry:overview","industry:chain","enterprise:map","supply:demand","smart:match"],userCount:8,status:"active",createTime:"2024-01-02"},{id:"3",name:"销售专员",description:"可以查看企业和需求信息，使用基础的数据查询功能",permissions:["dashboard:view","enterprise:manage","demand:manage","supply:demand"],userCount:15,status:"active",createTime:"2024-01-03"},{id:"4",name:"访客",description:"只能查看基础的数据概览信息",permissions:["dashboard:view"],userCount:5,status:"active",createTime:"2024-01-04"}]};return ie(()=>{K()}),(s,e)=>{const h=i("a-button"),b=i("a-menu-item"),j=i("a-menu-divider"),z=i("a-menu"),A=i("a-dropdown"),U=i("a-tag"),E=i("a-card"),G=i("a-col"),H=i("a-row"),X=i("a-input"),x=i("a-form-item"),Y=i("a-textarea"),S=i("a-radio"),Z=i("a-radio-group"),J=i("a-form"),T=i("a-modal"),Q=i("a-tree");return _(),C("div",re,[o("div",ue,[e[9]||(e[9]=o("div",{class:"header-content"},[o("h1",null,"角色管理"),o("p",null,"管理系统角色和权限配置")],-1)),t(h,{type:"primary",onClick:e[0]||(e[0]=a=>f.value=!0)},{icon:n(()=>[t(m(W))]),default:n(()=>[e[8]||(e[8]=r(" 添加角色 "))]),_:1,__:[8]})]),o("div",me,[t(H,{gutter:[16,16]},{default:n(()=>[(_(!0),C(M,null,P(d.value,a=>(_(),O(G,{span:8,key:a.id},{default:n(()=>[t(E,{class:"role-card",hoverable:!0},{default:n(()=>[o("div",pe,[o("div",ce,[o("h3",null,p(a.name),1),o("p",null,p(a.description),1)]),t(A,null,{overlay:n(()=>[t(z,null,{default:n(()=>[t(b,{onClick:u=>L(a)},{default:n(()=>[t(m(te)),e[10]||(e[10]=r(" 编辑 "))]),_:2,__:[10]},1032,["onClick"]),t(b,{onClick:u=>N(a)},{default:n(()=>[t(m(D)),e[11]||(e[11]=r(" 权限配置 "))]),_:2,__:[11]},1032,["onClick"]),t(j),t(b,{onClick:u=>V(a.id),danger:""},{default:n(()=>[t(m(ae)),e[12]||(e[12]=r(" 删除 "))]),_:2,__:[12]},1032,["onClick"])]),_:2},1024)]),default:n(()=>[t(h,{type:"text",size:"small"},{icon:n(()=>[t(m(ee))]),_:1})]),_:2},1024)]),o("div",ve,[o("div",_e,[t(m(ne)),o("span",null,p(a.userCount)+"个用户",1)]),o("div",fe,[t(m(D)),o("span",null,p(a.permissions.length)+"个权限",1)])]),o("div",ge,[e[13]||(e[13]=o("h4",null,"主要权限：",-1)),o("div",ye,[(_(!0),C(M,null,P(a.permissions.slice(0,4),u=>(_(),O(U,{key:u,color:"blue"},{default:n(()=>[r(p(B(u)),1)]),_:2},1024))),128)),a.permissions.length>4?(_(),O(U,{key:0},{default:n(()=>[r(" +"+p(a.permissions.length-4),1)]),_:2},1024)):le("",!0)])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),t(T,{open:f.value,"onUpdate:open":e[4]||(e[4]=a=>f.value=a),title:c.value?"编辑角色":"添加角色",width:"600px",onOk:q,onCancel:R},{default:n(()=>[t(J,{ref:"formRef",model:l,"label-col":{span:6},"wrapper-col":{span:18}},{default:n(()=>[t(x,{label:"角色名称",name:"name",rules:[{required:!0,message:"请输入角色名称"}]},{default:n(()=>[t(X,{value:l.name,"onUpdate:value":e[1]||(e[1]=a=>l.name=a)},null,8,["value"])]),_:1}),t(x,{label:"角色描述",name:"description",rules:[{required:!0,message:"请输入角色描述"}]},{default:n(()=>[t(Y,{value:l.description,"onUpdate:value":e[2]||(e[2]=a=>l.description=a),rows:3},null,8,["value"])]),_:1}),t(x,{label:"角色状态",name:"status"},{default:n(()=>[t(Z,{value:l.status,"onUpdate:value":e[3]||(e[3]=a=>l.status=a)},{default:n(()=>[t(S,{value:"active"},{default:n(()=>e[14]||(e[14]=[r("启用")])),_:1,__:[14]}),t(S,{value:"inactive"},{default:n(()=>e[15]||(e[15]=[r("禁用")])),_:1,__:[15]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"]),t(T,{open:g.value,"onUpdate:open":e[6]||(e[6]=a=>g.value=a),title:"权限配置",width:"800px",onOk:F,onCancel:e[7]||(e[7]=a=>g.value=!1)},{default:n(()=>{var a;return[o("div",ke,[o("h3",null,p((a=y.value)==null?void 0:a.name)+" - 权限配置",1),t(Q,{checkedKeys:k.value,"onUpdate:checkedKeys":e[5]||(e[5]=u=>k.value=u),"tree-data":$,checkable:"","default-expand-all":!0},null,8,["checkedKeys"])])]}),_:1},8,["open"])])}}}),Oe=de(he,[["__scopeId","data-v-dd9af909"]]);export{Oe as default};
